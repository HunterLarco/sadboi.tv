#import 'BroadcastEvent.graphql'
#import 'BroadcastState.graphql'

type Subscription {
  """
  Subscription for all broadcast events (show start times, chat messages,
  etc...).
  """
  broadcast: BroadcastSubscription!
}

type Query {
  """
  Used in conjunction with `broadcastEvent` subscription to load previously sent
  events.
  """
  broadcastEventHistory(
    request: BroadcastEventHistoryRequest!
  ): BroadcastEventHistoryResponse!
}

type Mutation {
  enterChat: EnterChatResponse!
  sendChatMessage(request: SendChatMessageRequest!): SendChatMessageResponse!
}

### broadcast

type BroadcastSubscription {
  event: BroadcastEvent
  state: BroadcastState
}

### broadcastEventHistory

input BroadcastEventHistoryRequest {
  cursor: ID
}

type BroadcastEventHistoryResponse {
  events: [BroadcastEvent!]!
  nextPageCursor: ID
}

### sendChatMessage

input SendChatMessageRequest {
  payload: SendChatMessagePayload!
}

input SendChatMessagePayload {
  # Only one of the following must be defined.
  text: SendChatMessageTextPayload
}

input SendChatMessageTextPayload {
  value: String!
}

type SendChatMessageResponse {
  event: BroadcastEvent!
}

### enterChat

type EnterChatResponse {
  event: BroadcastEvent!
}
